{"ast":null,"code":"import decode from 'jwt-decode';\nexport const login = (username, password) => {\n  // Get a token from api server using the fetch api\n  return fetch(`http://localhost:8080/api/auth/login`, {\n    method: 'POST',\n    body: JSON.stringify({\n      username,\n      password\n    })\n  }).then(response => response.json()).then(response => {\n    setToken(response.token); // Setting the token in localStorage\n\n    return Promise.resolve(response);\n  });\n};\n\nconst setToken = idToken => {\n  // Saves user token to localStorage\n  localStorage.setItem('user', idToken);\n};\n\nexport const getCurrentUser = () => {\n  return JSON.parse(localStorage.getItem(\"user\"));\n};\nexport const getToken = () => {\n  return localStorage.getItem('user');\n};\nexport const logout = () => {\n  localStorage.removeItem(\"user\");\n};\nexport const getProfile = () => {\n  return decode(getToken());\n};","map":{"version":3,"sources":["/Users/danielmendes/Documents/happypet/src/services/auth.tsx"],"names":["decode","login","username","password","fetch","method","body","JSON","stringify","then","response","json","setToken","token","Promise","resolve","idToken","localStorage","setItem","getCurrentUser","parse","getItem","getToken","logout","removeItem","getProfile"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,YAAnB;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,QAAD,EAAkBC,QAAlB,KAAsC;AACvD;AACA,SAAOC,KAAK,CAAE,sCAAF,EAAyC;AACnDC,IAAAA,MAAM,EAAE,MAD2C;AAEnDC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBN,MAAAA,QADmB;AAEnBC,MAAAA;AAFmB,KAAf;AAF6C,GAAzC,CAAL,CAONM,IAPM,CAODC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPX,EAQFF,IARE,CAQIC,QAAD,IAAc;AACpBE,IAAAA,QAAQ,CAACF,QAAQ,CAACG,KAAV,CAAR,CADoB,CACM;;AAC5B,WAAOC,OAAO,CAACC,OAAR,CAAgBL,QAAhB,CAAP;AACD,GAXM,CAAP;AAYD,CAdI;;AAgBL,MAAME,QAAQ,GAAII,OAAD,IAAoB;AACnC;AACAC,EAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BF,OAA7B;AACD,CAHD;;AAMF,OAAO,MAAMG,cAAc,GAAE,MAAK;AAC9B,SAAOZ,IAAI,CAACa,KAAL,CAAWH,YAAY,CAACI,OAAb,CAAqB,MAArB,CAAX,CAAP;AACH,CAFM;AAIP,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC1B,SAAOL,YAAY,CAACI,OAAb,CAAqB,MAArB,CAAP;AACH,CAFM;AAIP,OAAO,MAAME,MAAM,GAAG,MAAK;AACvBN,EAAAA,YAAY,CAACO,UAAb,CAAwB,MAAxB;AACH,CAFM;AAIP,OAAO,MAAMC,UAAU,GAAG,MAAM;AAC5B,SAAOzB,MAAM,CAACsB,QAAQ,EAAT,CAAb;AACD,CAFI","sourcesContent":["import decode from 'jwt-decode';\n\nexport const login = (username:string, password:string) => {\n    // Get a token from api server using the fetch api\n    return fetch(`http://localhost:8080/api/auth/login`, {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        password,\n      }),\n    })\n    .then(response => response.json())\n        .then((response) => {\n        setToken(response.token); // Setting the token in localStorage\n      return Promise.resolve(response);\n    });\n  }\n\n  const setToken = (idToken:string) => {\n    // Saves user token to localStorage\n    localStorage.setItem('user', idToken);\n  }\n\n\nexport const getCurrentUser =() =>{\n    return JSON.parse(localStorage.getItem(\"user\")!);\n};\n\nexport const getToken = () => {\n    return localStorage.getItem('user');\n}\n\nexport const logout = () =>{\n    localStorage.removeItem(\"user\");\n};\n\nexport const getProfile = () => {\n    return decode(getToken());\n  }\n\n\n\n"]},"metadata":{},"sourceType":"module"}